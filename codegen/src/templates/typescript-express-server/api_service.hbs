import {Service} from 'typedi';
export {Container} from 'typedi';
{{!-- import {FindManyOption} from './authSchemas'; --}}
import { {{~fpc tag}}Model} from './{{tag}}.model';
import * as requestTypes from './{{tag}}.parameters';
{{!-- import {User} from '@prisma/client'; --}}
import {errors} from '../../errors';
// custom begin import
{{{lookup ../../custom "import" }}}
// custom end import


@Service()
export class {{fpc tag}}Service {
  constructor(
        private {{tag}}Model: {{fpc tag}}Model,
  ) {}
{{#each data.paths as |path|}}
  {{#each path as |d|}}
  {{#if (equal ../../tag d.tags.0) }}
  async {{d.operationId}}(
      param :requestTypes.{{fpc d.operationId}}Params,
        {{!-- {{~#if (model_type_is_array d.operationId) ~}}
[]
        {{~else~}}
        {{~/if}}, --}}
        {{#if (equal (model_type d.operationId) "uploadMany")  }}
      files: Express.Multer.File[],
        {{/if}}
  ) {
    {{#if (equal (model_type d.operationId) "custom")  }}
    // custom begin {{d.operationId}}
{{{lookup ../../custom d.operationId }}}
    // custom end {{d.operationId}}
    {{else}}
    // custom begin {{d.operationId}}
{{{lookup ../../custom d.operationId }}}
    // custom end {{d.operationId}}
    const res = await this.{{../../tag}}Model.{{d.operationId}}(
        param,
      {{#if (equal (model_type d.operationId) "uploadMany")  }}
        files,
      {{/if}}
    ).catch((e) =>{
      throw e;
    });
    return res;
    {{/if}}
  }
  {{/if}}
  {{/each}}
{{/each}}
}

